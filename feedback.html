<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Majan-Eye-Centre</title>
    <meta name="description" content="Majan Eye Care">
    <meta name="author" content="Brillowelle">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Place favicon.ico in the root directory -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/imgs/favicon.svg">
    <!-- CSS here -->
    <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/vendor/animate.min.css">
    <link rel="stylesheet" href="assets/css/plugins/swiper.min.css">
    <link rel="stylesheet" href="assets/css/vendor/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/vendor/fontawesome-pro.css">
    <link rel="stylesheet" href="assets/css/vendor/spacing.css"> 
    <link rel="stylesheet" href="assets/css/plugins/odometer-theme-default.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- Ajax script -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body class="body-1">
  <!-- <h2>Optical Clinic Feedback</h2>
  <form id="gform">
    <input type="number" placeholder="treatment" id="treatment" name="treatment" min="1" max="5"  required>

    <input type="number" placeholder="cleanliness" id="cleanliness" name="cleanliness" min="1" max="5" required>

    <input type="number" placeholder="staff" id="staff" name="staff" min="1" max="5" required>

    <input type="number" placeholder="satisfaction" id="satisfaction" name="satisfaction" min="1" max="5" required>

    <select name="recommend" id="recommend" required>
      <option value="" disabled="" selected="" hidden="">recommend</option>
      <option value="Yes">Yes</option>
      <option value="No">No</option>
    </select>

    <button type="submit">Submit</button>
    <p id="submit-alert"></p>
  </form> -->
    <section class="pricing-appointment section-space mt-sm-40 mt-xs-30">
        <div class="container">
            <div class="row align-items-center text-center mb-60 mb-sm-50 mb-xs-40">
                <div class="">
                    <div class="section__title-wrapper">
                        <h5 class="section__subtitle color-theme-primary mb-15 mb-xs-10 title-animation"><img src="assets/imgs/icons/heart.png" alt="icon not found" class="img-fluid">Contact Us</h5>
                        <h2 class="section__title mb-0 title-animation">Strengthen Your Vison With Us</h2>
                    </div>
                </div>

            </div>

            <div class="row">
                <!-- Contact Information -->
                <div class="col-lg-4">
                    <div class="pricing-appointment__contact-item__wrap d-flex flex-column">
                        <div class="pricing-appointment__contact-item d-flex align-items-end">
                            <div class="pricing-appointment__contact-item-icon d-flex align-items-center justify-content-center">
                                <i class="fa-solid fa-phone"></i>
                            </div>
                            <div class="pricing-appointment__contact-item-text">
                                <p>Request A Call:</p>
                                <h5 class="mb-0"><a href="tel:+96890914123">+96890914123</a></h5>
                            </div>
                        </div>

                        <div class="pricing-appointment__contact-item d-flex align-items-end">
                            <div class="pricing-appointment__contact-item-icon d-flex align-items-center justify-content-center">
                                <i class="fa-solid fa-envelope"></i>
                            </div>
                            <div class="pricing-appointment__contact-item-text">
                                <p>Email Address</p>
                                <h5 class="mb-0"><a href="mailto:treegmajan@gmail.com">treegmajan@gmail.com</a></h5>
                            </div>
                        </div>

                        <div class="pricing-appointment__contact-item d-flex align-items-end">
                            <div class="pricing-appointment__contact-item-icon d-flex align-items-center justify-content-center">
                                <i class="fa-solid fa-clock"></i>
                            </div>
                            <div class="pricing-appointment__contact-item-text">
                                <p>Sunday - Friday:</p>
                                <h5 class="mb-0">9 am - 8 pm</h5>
                            </div>
                        </div>

                        <div class="pricing-appointment__contact-item d-flex align-items-end">
                            <div class="pricing-appointment__contact-item-icon d-flex align-items-center justify-content-center">
                                <i class="fa-solid fa-location-dot"></i>
                            </div>
                            <div class="pricing-appointment__contact-item-text">
                                <p>Location Address</p>
                                <h5 class="mb-0"><a href="https://maps.app.goo.gl/dYARPtevGhyvyZDq9">من أسواق شمس الخليج، ولاية, Barka 320, Oman</a></h5>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Contact Form -->
                <div class="col-lg-8">
                    <form id="gform"  method="" action="" class="pricing-appointment__form mt-md-60 mt-sm-60 mt-xs-60">
                        <h4 class="text-center section__title mb-15 title-animation">Contact Form</h4>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="pricing-appointment__form-input">
                                    <input name="name" id="name" type="text" placeholder="Your name" required>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="pricing-appointment__form-input">
                                    <input name="email" id="email" type="email" placeholder="Your email" required>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="pricing-appointment__form-input">
                                    <input name="phone" id="phone" type="tel" placeholder="Phone" required>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="pricing-appointment__form-select">
                                    <select name="doctor" id="doctor">
                                        <option value="" disabled="" selected="" hidden="">Choose a Doctor</option>
                                        <option value="Dr.WALEED-BUNAMI">Dr. WALEED BUNAMI</option>
                                        <option value="Dr.MOHAMMED-ANWAR">Dr. MOHAMMED ANWAR</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="pricing-appointment__form-input">
                                    <textarea name="message" id="message" placeholder="Messege"></textarea>
                                </div>
                            </div>

                            <div class="col-12">
                                <button type="submit" class="rr-btn rr-btn__primary-color mt-0">
                                    <span class="btn-wrap">
                                        <span class="text-one">Send Now<i class="fa-solid fa-paper-plane-top"></i></span>
                                        <span class="text-two">Send Now<i class="fa-solid fa-paper-plane-top"></i></span>
                                    </span>
                                </button>
                                <p id="submit-alert"></p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <section class="pricing-appointment section-space mt-sm-40 mt-xs-30">
        <div class="container">
            <div class="row align-items-center text-center mb-60 mb-sm-50 mb-xs-40">
                <div class="">
                    <div class="section__title-wrapper">
                        <h5 class="section__subtitle color-theme-primary mb-15 mb-xs-10 title-animation">Contact Us</h5>
                        <h2 class="section__title mb-0 title-animation">Strengthen Your Vison With Us</h2>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Contact Form -->
                <div class="col-lg-12">
                    <form id="gform"  method="" action="" class="pricing-appointment__form mt-md-60 mt-sm-60 mt-xs-60">
                        <h4 class="text-center section__title mb-15 title-animation">Contact Form</h4>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="pricing-appointment__form-input">
                                    <input name="name" id="name" type="text" placeholder="Your name" required>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="pricing-appointment__form-input">
                                    <input name="date" id="date" type="date" placeholder="Date" required>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="pricing-appointment__form-input">
                                    <input name="phone" id="phone" type="tel" placeholder="Phone" required>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="pricing-appointment__form-select">
                                    <select name="doctor" id="doctor">
                                        <option value="" disabled="" selected="" hidden="">Choose a Doctor</option>
                                        <option value="Dr.WALEED-BUNAMI">Dr. WALEED BUNAMI</option>
                                        <option value="Dr.MOHAMMED-ANWAR">Dr. MOHAMMED ANWAR</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="pricing-appointment__form-input">
                                    <textarea name="message" id="message" placeholder="Messege"></textarea>
                                </div>
                            </div>

                            <div class="col-12">
                                <button type="submit" class="rr-btn rr-btn__primary-color mt-0">
                                    <span class="btn-wrap">
                                        <span class="text-one">Send Now<i class="fa-solid fa-paper-plane-top"></i></span>
                                        <span class="text-two">Send Now<i class="fa-solid fa-paper-plane-top"></i></span>
                                    </span>
                                </button>
                                <p id="submit-alert"></p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>





 <!-- <script>
        // Form submission using AJAX
        $("#gform").submit((e)=>{
            e.preventDefault()
            $.ajax({
                url:"https://script.google.com/macros/s/AKfycbxift1MnwoKILSGNidZCtHMIhLEmXEKsCJLootdr2nhz_8ipaifxO16ZXz4AoZlYRtS/exec",
                data:$("#gform").serialize(),
                method:"post",
                success: function(response) {
                    $("#submit-alert").text("Form Submitted Successfully!!").css({"display":"contents", "color": "#50b948", "font-weight": "900"});
                    setTimeout(() => window.location.reload(), 10000); // Reload after 10 seconds
                },
                error: function(err) {
                    $("#submit-alert").text("Something Went Wrong!..Check filled details are correct and Submit again or Please try Contacting through WhatsApp or Mobile Number").css({"display":"contents", "color": "red", "font-weight": "900"});
                }
            })
        })
    </script> -->
<script>
const ENDPOINT = "https://script.google.com/macros/s/AKfycbxift1MnwoKILSGNidZCtHMIhLEmXEKsCJLootdr2nhz_8ipaifxO16ZXz4AoZlYRtS/exec";  // replace with your actual deployment ID
const STORAGE_KEY = "offline_feedback_queue";

function saveOffline(data) {
    let queue = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    queue.push(data);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(queue));
}

function sendToServer(data, callback) {
    $.ajax({
        url: ENDPOINT,
        data: data,
        method: "POST",
        success: function (response) {
            callback(true);
        },
        error: function () {
            callback(false);
        }
    });
}

// Submit handler
$("#gform").submit(function (e) {
    e.preventDefault();

    const formData = {
        treatment: $("#treatment").val(),
        cleanliness: $("#cleanliness").val(),
        staff: $("#staff").val(),
        satisfaction: $("#satisfaction").val(),
        recommend: $("#recommend").val(),
        formGoogleSheetName: "responses",
        formGoogleSendEmail: "mnkv1013@gmail.com",
        formDataNameOrder: JSON.stringify(["treatment", "cleanliness", "staff", "satisfaction", "recommend"])
    };

    if (navigator.onLine) {
        sendToServer(formData, function (success) {
            if (success) {
                $("#submit-alert").text("Feedback submitted online! ✅").css({ color: "green" });
                setTimeout(() => window.location.reload(), 5000);
            } else {
                saveOffline(formData);
                $("#submit-alert").text("Connection error. Saved offline, will retry when online! ⚠️").css({ color: "orange" });
            }
        });
    } else {
        saveOffline(formData);
        $("#submit-alert").text("No internet. Saved offline, will retry when online! ⚠️").css({ color: "orange" });
    }
});

// Retry unsent offline data every 5 seconds
setInterval(function () {
    if (navigator.onLine) {
        let queue = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
        if (queue.length > 0) {
            const next = queue.shift(); // remove first
            sendToServer(next, function (success) {
                if (success) {
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(queue));
                    $("#submit-alert").text("Offline feedback synced ✅").css({ color: "green" });
                } else {
                    queue.unshift(next); // put it back
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(queue));
                }
            });
        }
    }
}, 5000);
</script>

<script src="assets/js/vendor/jquery-3.7.1.min.js"></script>
<script src="assets/js/plugins/waypoints.min.js"></script>
<script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
<script src="assets/js/plugins/meanmenu.min.js"></script>
<script src="assets/js/plugins/odometer.min.js"></script>
<script src="assets/js/plugins/swiper.min.js"></script>
<script src="assets/js/plugins/wow.js"></script>
<script src="assets/js/vendor/magnific-popup.min.js"></script>
<script src="assets/js/vendor/type.js"></script>
<script src="assets/js/plugins/nice-select.min.js"></script>
<script src="assets/js/vendor/jquery-ui.min.js"></script>
<script src="assets/js/vendor/jquery.appear.js"></script>
<script src="assets/js/plugins/parallax.min.js"></script>
<script src="assets/js/plugins/parallax-scroll.js"></script>
<script src="assets/js/plugins/gsap.min.js"></script>
<script src="assets/js/plugins/ScrollTrigger.min.js"></script>
<script src="assets/js/plugins/SplitText.js"></script>
<script src="assets/js/plugins/tween-max.min.js"></script>
<script src="assets/js/plugins/draggable.min.js"></script>
<script src="assets/js/plugins/smoothscroll.js"></script>
<script src="assets/js/vendor/ajax-form.js"></script>
<script src="assets/js/main.js"></script>
<script src="assets/js/main.js"></script>
</body>
</html>

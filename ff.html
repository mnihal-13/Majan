<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Majan-Eye-Centre</title>
    <meta name="description" content="Majan Eye Care">
    <meta name="author" content="Brillowelle">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Place favicon.ico in the root directory -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/imgs/favicon.svg">
    <!-- CSS here -->
    <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/vendor/animate.min.css">
    <link rel="stylesheet" href="assets/css/plugins/swiper.min.css">
    <link rel="stylesheet" href="assets/css/vendor/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/vendor/fontawesome-pro.css">
    <link rel="stylesheet" href="assets/css/vendor/spacing.css"> 
    <link rel="stylesheet" href="assets/css/plugins/odometer-theme-default.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- Ajax script -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>

<body class="body-1">


    <main>


    <section class="pricing-appointment section-space mt-sm-40 mt-xs-30">
        <div class="container">
            <div class="row align-items-center text-center mb-60 mb-sm-50 mb-xs-40">
                <div class="">
                    <div class="section__title-wrapper">
                        <h5 class="section__subtitle color-theme-primary mb-15 mb-xs-10 title-animation">Contact Us</h5>
                        <h2 class="section__title mb-0 title-animation">Strengthen Your Vison With Us</h2>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Contact Form -->
                <div class="col-lg-12">
                    <form id="gform"  method="" action="" class="pricing-appointment__form mt-md-60 mt-sm-60 mt-xs-60">
                        <h4 class="text-center section__title mb-15 title-animation">Contact Form</h4>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="pricing-appointment__form-input">
                                    <input name="name" id="name" type="text" placeholder="Your name" required>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="pricing-appointment__form-input">
                                    <input name="date" id="date" type="date" placeholder="Date" required>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="pricing-appointment__form-input">
                                    <input name="phone" id="phone" type="tel" placeholder="Phone" required>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="pricing-appointment__form-select">
                                    <select name="doctor" id="doctor">
                                        <option value="" disabled="" selected="" hidden="">Choose a Doctor</option>
                                        <option value="Dr.WALEED-BUNAMI">Dr. WALEED BUNAMI</option>
                                        <option value="Dr.MOHAMMED-ANWAR">Dr. MOHAMMED ANWAR</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="pricing-appointment__form-input">
                                    <textarea name="message" id="message" placeholder="Messege"></textarea>
                                </div>
                            </div>

                            <div class="col-12">
                                <button type="submit" class="rr-btn rr-btn__primary-color mt-0">
                                    <span class="btn-wrap">
                                        <span class="text-one">Send Now<i class="fa-solid fa-paper-plane-top"></i></span>
                                        <span class="text-two">Send Now<i class="fa-solid fa-paper-plane-top"></i></span>
                                    </span>
                                </button>
                                <p id="submit-alert"></p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>



    <!-- JS here -->
    <!-- <script>
        // Form submission using AJAX
        $("#gform").submit((e)=>{
            e.preventDefault()
            $.ajax({
                url:"https://script.google.com/macros/s/AKfycbx68ZBJluLdS2mTa0OcsQVhC-qEvjklleyXKTYPX3kujHkUhN-1NxBeV9w_azK2oBMo/exec",
                data:$("#gform").serialize(),
                method:"post",
                success: function(response) {
                    $("#submit-alert").text("Form Submitted Successfully!!").css({"display":"contents", "color": "#50b948", "font-weight": "900"});
                    setTimeout(() => window.location.reload(), 10000); // Reload after 10 seconds
                },
                error: function(err) {
                    $("#submit-alert").text("Something Went Wrong!..Check filled details are correct and Submit again or Please try Contacting through WhatsApp or Mobile Number").css({"display":"contents", "color": "red", "font-weight": "900"});
                }
            })
        })
    </script> -->
    <script>
        const ENDPOINT = "https://script.google.com/macros/s/AKfycbxift1MnwoKILSGNidZCtHMIhLEmXEKsCJLootdr2nhz_8ipaifxO16ZXz4AoZlYRtS/exec";  // replace with your actual deployment ID
        const STORAGE_KEY = "offline_feedback_queue";

        function saveOffline(data) {
            let queue = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
            queue.push(data);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(queue));
        }

        function sendToServer(data, callback) {
            $.ajax({
                url: ENDPOINT,
                data: data,
                method: "POST",
                success: function (response) {
                    callback(true);
                },
                error: function () {
                    callback(false);
                }
            });
        }

        // Submit handler
        $("#gform").submit(function (e) {
            e.preventDefault();

            const formData = {
                treatment: $("#treatment").val(),
                cleanliness: $("#cleanliness").val(),
                staff: $("#staff").val(),
                satisfaction: $("#satisfaction").val(),
                recommend: $("#recommend").val(),
                formGoogleSheetName: "responses",
                formGoogleSendEmail: "mnkv1013@gmail.com",
                formDataNameOrder: JSON.stringify(["treatment", "cleanliness", "staff", "satisfaction", "recommend"])
            };

            if (navigator.onLine) {
                sendToServer(formData, function (success) {
                    if (success) {
                        $("#submit-alert").text("Feedback submitted online! ✅").css({ color: "green" });
                        setTimeout(() => window.location.reload(), 5000);
                    } else {
                        saveOffline(formData);
                        $("#submit-alert").text("Connection error. Saved offline, will retry when online! ⚠️").css({ color: "orange" });
                    }
                });
            } else {
                saveOffline(formData);
                $("#submit-alert").text("No internet. Saved offline, will retry when online! ⚠️").css({ color: "orange" });
            }
        });

        // Retry unsent offline data every 5 seconds
        setInterval(function () {
            if (navigator.onLine) {
                let queue = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
                if (queue.length > 0) {
                    const next = queue.shift(); // remove first
                    sendToServer(next, function (success) {
                        if (success) {
                            localStorage.setItem(STORAGE_KEY, JSON.stringify(queue));
                            $("#submit-alert").text("Offline feedback synced ✅").css({ color: "green" });
                        } else {
                            queue.unshift(next); // put it back
                            localStorage.setItem(STORAGE_KEY, JSON.stringify(queue));
                        }
                    });
                }
            }
        }, 5000);
    </script>
    <script src="assets/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="assets/js/plugins/waypoints.min.js"></script>
    <script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="assets/js/plugins/meanmenu.min.js"></script>
    <script src="assets/js/plugins/odometer.min.js"></script>
    <script src="assets/js/plugins/swiper.min.js"></script>
    <script src="assets/js/plugins/wow.js"></script>
    <script src="assets/js/vendor/magnific-popup.min.js"></script>
    <script src="assets/js/vendor/type.js"></script>
    <script src="assets/js/plugins/nice-select.min.js"></script>
    <script src="assets/js/vendor/jquery-ui.min.js"></script>
    <script src="assets/js/vendor/jquery.appear.js"></script>
    <script src="assets/js/plugins/parallax.min.js"></script>
    <script src="assets/js/plugins/parallax-scroll.js"></script>
    <script src="assets/js/plugins/gsap.min.js"></script>
    <script src="assets/js/plugins/ScrollTrigger.min.js"></script>
    <script src="assets/js/plugins/SplitText.js"></script>
    <script src="assets/js/plugins/tween-max.min.js"></script>
    <script src="assets/js/plugins/draggable.min.js"></script>
    <script src="assets/js/plugins/smoothscroll.js"></script>
    <script src="assets/js/vendor/ajax-form.js"></script>
    <script src="assets/js/main.js"></script>
    
</body>

</html>